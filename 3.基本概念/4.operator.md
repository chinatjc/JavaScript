### 操作符

包括算术操作符（加号、减号），位操作符、关系操作符、相等操作符

#### 一元操作符
一次只能操作一个值的操作符叫做一元操作符
> 递增和递减操作符

- `前置` `递增`操作符：在要操作的`变量之前`，且为`加法操作`；变量的值是在`求值之前改变的`
```javascript
    var age = 25;
    'The age after one year is ' + ++age; // 'The age after one year is 26'，先计算++age，然后再进行字符串拼接
    console.log(age); // 26
```

- `后置` `递增`操作符：在要操作的`变量之后`，且为`加法操作`；变量的值是在`求值之后改变的`
```javascript
    var age = 25;
    'The age after one year is ' + age++; // 'The age after one year is 25'，先进行字符串拼接，然后再计算++age
    console.log(age); // 26
```

- `前置` `递减`操作符：在要操作的`变量之前`，且为`减法操作`；变量的值是在`求值之前改变的`
```javascript
    var age = 25;
    'Last year, the age was ' + --age; // 'Last year, the age was 24'，先计算--age，然后再进行字符串拼接
    console.log(age); // 24
```

- `后置` `递减`操作符：在要操作的`变量之后`，且为`减法操作`；变量的值是在`求值之后改变的`
```javascript
    var age = 25;
    'Last year, the age was ' + age--; // 'Last year, the age was 25'，先进行字符串拼接，然后再计算age--
    console.log(age); // 24
```
- 递增和递减操作符可以作用于任何类型的数据，操作的步骤：***先执行Number()方法转换为Number类型的数据***，***然后再进行相应的递增或递减操作***
```javascript
    // 以前置递增为例子
    var a = undefined;
    var b = null;
    var c = 1;
    var d = '12.3';
    var e = '12.3.4';
    var f = {};
    var g = {valueOf: () => 123};
    var h = [123];
    var i = [123, 456];

    ++a; // NaN，Number(undefined)转换为NaN，涉及NaN的操作都返回NaN
    ++b; // 1，Number(null)转换为0，++0 -> 1
    ++c; // 2，Number(1)转换为1，++1 -> 2
    ++d; // 13.3，Number('12.3')转换为12.3，++12.3 -> 13.3
    ++e; // NaN，Number('12.3.4')转换为NaN，涉及NaN的操作都返回NaN
    ++f; // NaN，Number({})转换为NaN，涉及NaN的操作都返回NaN
    ++g; // 124，Number({valueOf: () => 123})转换为123，++123 -> 124
    ++h; // 124，Number([123])转换为123，++123 -> 124
    ++i; // NaN，Number([123, 456])转换为NaN，涉及NaN的操作都返回NaN
```

> 一元加和减操作符
- 和数学课本上的加、减性质是一致的
- 用在非Number类型的数据上时，***先执行Number()方法转换为Number类型的数据***，***然后再进行相应的加、减操作***
```javascript
    var a = undefined;
    var b = null;
    var c = 1;
    var d = '12.3';
    var e = '12.3.4';
    var f = {};
    var g = {valueOf: () => 123};
    var h = [123];
    var i = [123, 456];

    +a; // NaN，Number(undefined)转换为NaN，涉及NaN的操作都返回NaN
    +b; // 0，Number(null)转换为0，+0 -> 0
    +c; // 1，Number(1)转换为1，+1 -> 1
    +d; // 12.3，Number('12.3')转换为12.3，+12.3 -> 12.3
    +e; // NaN，Number('12.3.4')转换为NaN，涉及NaN的操作都返回NaN
    +f; // NaN，Number({})转换为NaN，涉及NaN的操作都返回NaN
    +g; // 123，Number({valueOf: () => 123})转换为123，+123 -> 123
    +h; // 123，Number([123])转换为123，+123 -> 123
    +i; // NaN，Number([123, 456])转换为NaN，涉及NaN的操作都返回NaN
```

<br>

#### 位操作

> ECMAScript中的数值都以64位格式存储的，而位操作符只能操作32位整数，所以位操作的过程：64位 -> 32位 -> 位操作 -> 32位 -> 64位

> 32位整数中，第32位表示数值的符号：0表示正数，1表示负数；剩余31位表示数值的值

> 负数通过`二进制补码`的方式得到负数的二进制表示法

```javascript
18; // 2^4 + 2^1 -> 10010 -> 00000000000000000000000000010010

-18; // 11111111111111111111111111101110

// 二进制补码

// 1. 求绝对值的二进制码，18
// 00000000000000000000000000010010

// 2. 求二进制反码，即0和1互换
// 11111111111111111111111111101101

// 3. 二进制反码 + 1
// 11111111111111111111111111101110
```

> NaN 和 Infinity 值应用位操作时，这两个值都会被当成 0 来处理

> 位操作中的操作数 `非Number类的值` 时，通过 `Number(variable)` 来转换为Number类型的值

> 小数没有位运算，对小数进行位运算，会直接把小数部分舍去

```javascript

~1.234; // -2

```

位操作符包含：按位非(NOT)、按位与(AND)、按位或(OR)、按位异或(XOR)、左移(<<)、有符号右移(>>)、无符号右移(>>>)

> 按位非(NOT)
- 符号为一个波浪线 ( ~number )，求其二进制反码，其本质是 操作数的负值减 1: -n - 1
```javascript
25; // 00000000000000000000000000011001

~25; // -26

// 得到按位非的二进制码
// 11111111111111111111111111100110

// 求其对应的十进制数
// 00000000000000000000000000011010 -> -26


// 使用 ~ 运算符 取整

~~6.18; // 6
```

> 按位与(AND)
- 符号为一个和号字符 ( number1 & number2 )
- 两个操作数，相同位置的数，若 operand1 === 1 && operand2 === 1 -> 1，否则 other -> 0，得出操作按位与的结果
```javascript
25 & 3

//          25 -> 00000000000000000000000000011001
//           3 -> 00000000000000000000000000000011
// ------------------------------------------------
// 25 & 3 -> 1 -> 00000000000000000000000000000001


// 使用 & 运算符 判断一个数的奇偶

// 偶数 & 1 -> 0
// 奇数 & 1 -> 1

12 & 1; // 0
13 & 1; // 1
```

> 按位或(OR)
- 符号为一个竖线符号 ( number1 | number2 )
- 两个操作数，相同位置的数，若 operand1 === 1 || operand2 === 1 -> 1，否则 other -> 0，得出操作按位或的结果
```javascript
25 & 3

//           25 -> 00000000000000000000000000011001
//            3 -> 00000000000000000000000000000011
// ------------------------------------------------
// 25 | 3 -> 27 -> 00000000000000000000000000011011
```

> 按位异或(XOR)
- 符号为一个插入符号 ( number1 ^ number2 )
- 两个操作数，相同位置的数，若 operand1 === 1 && operand2 === 0 || operand1 === 0 && operand2 === 1 -> 1，否则 other -> 0，得出操作按位或的结果
```javascript
25 ^ 3

//           25 -> 00000000000000000000000000011001
//            3 -> 00000000000000000000000000000011
// ------------------------------------------------
// 25 ^ 3 -> 26 -> 00000000000000000000000000011010


// 使用 ^ 运算符 完成值的交换

var a = 4;
var b = 7;

a ^= b;
b ^= a;
a ^= b;

a; // 7
b; // 4

```

> 左移(<<)
- 符号为两个小于号 ( number << count )
- 数值的所有位向左移动count个位数，左侧被移出的位被丢弃，右侧空出的位 '0' 来填补
```javascript
25 << 3

//              25 -> 00000000000000000000000000011001
// 向左移 3 个位数      00000000000000000000000011001
// 右侧空出的位填补 '0'  00000000000000000000000011001000
// -------------------------------------------------------
// 25 << 3 -> 200 ->   00000000000000000000000011001000
```

> 有符号右移(>>)
- 符号为两个大于号 ( number >> count )
- 数值的所有位向右移动count个位数，右侧被移出的位被丢弃，左侧空出的位 '符号位的数值' 来填补
```javascript
25 >> 3

//                           25 -> 00000000000000000000000000011001
// 向右移 3 个位数                      00000000000000000000000000011
// 左侧空出的位填补 '符号位的数值': 0  00000000000000000000000000000011
// -------------------------------------------------------
//              25 >> 3 -> 3 ->    00000000000000000000000000000011
```

> 无符号右移(>>>)
- 符号为三个大于号 ( number >>> count )
- 数值的所有位向右移动count个位数，右侧被移出的位被丢弃，左侧空出的位 '0' 来填补
```javascript
25 >>> 3

//              25 -> 00000000000000000000000000011001
// 向右移 3 个位数         00000000000000000000000000011
// 左侧空出的位填补 '0'  00000000000000000000000000000011
// -------------------------------------------------------
// 25 >>> 3 -> 3 ->    00000000000000000000000000000011
```

<br>

#### 布尔操作符

布尔操作符包含：非(NOT)、与(AND)、或(OR)
> 非(NOT)
- 符号为一个叹号 ( ! )，对其变量的值求反；如果变量的数据类型不是Boolean值，则先通过Boolean()方法转化为Boolean值，然后再进行求反
- !!，相当于Boolean()方法：首先对变量求反，返回一个Boolean值，然后再对该Boolean值求反，反反得正
```javascript
    !undefined; // true
    !null; // true
    !true; // false
    !0; // true
    !1; // false
    !NaN; // true
    !''; // true
    !'a'; // false
    !{}; // false

    // !!
    !! undefined; // false，第一个 ! 求反为true，第二个 ! 再求反为false
```

> 与(AND)
- 符号为两个和号(&&)

`逻辑与的真值表`

第一个操作数|第二个操作数|结果
:-:|:-:|:-:
true|true|true
true|false|false
false|true|false
false|false|false

- 逻辑与操作符可以应用于任何类型的操作数
    - 如果第一个操作数可以决定返回的结果，那么就返回第一个操作数，而不会对第二个操作数进行求值；即，第一个操作数的Boolean值为false时，直接返回第一个操作数，无需对第二个操作数进行求值
    - 否则返回第二个操作数

```javascript
    true && true; // true
    true && false; // false
    false && true; // false
    false && false; // false

    1 && 2; // 2
    1 && 0; // 0
    0 && 1; // 0
    0 && NaN; // 0
```

> 或(OR)
- 符号为两个竖线符号(||)

`逻辑或的真值表`

第一个操作数|第二个操作数|结果
:-:|:-:|:-:
true|true|true
true|false|true
false|true|true
false|false|false

- 逻辑或操作符可以应用于任何类型的操作数
    - 如果第一个操作数可以决定返回的结果，那么就返回第一个操作数，而不会对第二个操作数进行求值；即，第一个操作数的Boolean值为true时，直接返回第一个操作数，无需对第二个操作数进行求值
    - 否则返回第二个操作数

```javascript
    true || true; // true
    true || false; // true
    false || true; // true
    false || false; // false

    1 || 2; // 1
    1 || 0; // 1
    0 || 1; // 1
    0 || NaN; // NaN
```

<br>

#### 乘性操作符

如果乘性计算的操作数不是Number类型的数据，则先使用Number()方法进行转换，然后在进行乘性操作

> 乘法
- 符号为一个星号(*)，用于计算两个操作数的乘法
    - 如果有一个操作数是NaN，则返回NaN
    - 如果是Infinity与0相乘，则返回NaN
    - 如果是Infinity与非零数值相乘 (包含Infinity 和 -Infinity)，则根据非零数值的正负号，选择返回Infinity 或 -Infinity

```javascript
    2 * 4; // 8
    2 * NaN; // NaN
    Infinity * 0; // NaN
    Infinity * 1; // Infinity
    Infinity * -1; // -Infinity
    Infinity * Infinity; // Infinity
    Infinity * -Infinity; // -Infinity
    2 * [3]; // 6，数组[3]通过Number()方法，转换为数值3，然后再与操作数2进行乘性操作
```

> 除法
- 符号为一个斜线符号(/)，用于计算第一个操作数除以第二个操作数
    - 如果有一个操作数是NaN，则返回NaN
    - 如果是(Infinity 或 -Infinity)除以(Infinity 或 -Infinity)，则返回NaN
    - 如果是0除以0，则返回NaN
    - 如果是任何数值除以0，则根据第一个操作数的正负号，选择返回Infinity 或 -Infinity
    - 如果是(Infinity 或 -Infinity)除以非零数值，则根据两个操作符的符号情况，选择返回Infinity 或 -Infinity

```javascript
    4 / 2; // 2
    NaN / 3; // NaN

    Infinity / -Infinity; // NaN

    0 / 0; // NaN

    1 / 0; // Infinity
    -1 / 0; // -Infinity
    Infinity / 0; // Infinity
    -Infinity / 0; // -Infinity

    Infinity / 1; // Infinity
    -Infinity / -1; // Infinity

    4 / [2]; // 2，数组[2]通过Number()方法，转换为数值2，然后再与操作数4进行除性操作
```

> 求模
- 符号为一个百分号(％)，用于计算第一个操作数除以第二个操作数之后，商为整数时的余数
    - 如果被除数和除数都是有限大的数值(除数是0除外)，则进行正常的求模运算
    - 如果被除数是有限大的数值，除数是(Infinity 或 -Infinity)，则返回被除数
    - 其余情况，都返回NaN
```javascript
    4 % 3; // 1
    -123 % Infinity; // -123

    4 % 0; //NaN
    Infinity % 5; //NaN

    9 % [5]; // 4，数组[5]通过Number()方法，转换为数值5，然后再与操作数9进行求模操作
```

<br>

#### 加性操作符

加性操作符包含：加法、减法
> 加法

- 加法操作符，偏向于字符串 -> 只要有一个操作数是 字符串，就进行字符串拼接

[4.operator_addition.md](./4.operator_addition.md "4.operator_addition.md")

- 多个加法操作符的运算顺序
    - 从左向右依次执行加法操作法；如果想提升某个加法操作符的优先级，可以使用一对圆括号
```javascript
    var message = 'today is ' + new Date().getDate() + '!'; // 'today is 21!'

    var result = '1 + 2 is ' + 1 + 2; // '1 + 2 is 12'
    var result = '1 + 2 is ' + (1 + 2); // '1 + 2 is 3'
```

> 减法
- 减法操作符相当于：操作数1 加上 负的操作数2，相关细节部门可以参考[加法操作符](#加性操作符)
- 减法中，两个操作符的类型必须是Number类型，如果不是，则通过Number()方法进行数据类型转换
```javascript
    // 特殊的数值运算
    2 - 1; // 1
    Infinity - -Infinity; // Infinity
    -Infinity - Infinity; // -Infinity
    -Infinity - -Infinity; // NaN
    +0 - +0; // +0
    +0 - -0; // +0
    -0 - +0; // -0
    -0 - -0; // +0
    NaN + 1; // NaN
```

<br>

#### 关系操作符
关系操作符包含：小于(<)、大于(>)、小于或等于(<=)、大于或等于(>=)

- 关系操作符，偏向于数字 -> 只有两个操作数都是 `字符串`，才进行 `字符串比较`，其他情况都转化为 `数字`，进行 `数字比较`

[4.operator_relational.md](./4.operator_relational.md "4.operator_relational.md")

<br>

#### 相等操作符
因为相等操作符(==)、不相等操作符(!=)带来了隐式转换数据类型的风险，所以在实际开发中， ***强烈建议*** 使用`全等操作符(===)来代替相等操作符(==)`、`不全等操作符(!==)来代替不相等操作符(!=)`

- 全等操作符和不全等操作符，不会对数据类型进行隐式转换
- 只有操作数的内存地址一致的情况下，操作数才是全等的关系
```javascript
    1 === +'1'; // true
    null === undefined; // false

    var obj1 = {name: '张三'};
    var obj2 = {name: '张三'};
    var obj3 = obj1;

    obj1 === obj2; // false
    obj1 === obj3; // true
```

<br>

#### 条件操作符
> variable = boolean_expression ? true_value : false_value;

如果条件boolean_expression为true，则返回true_value，否则返回false_value
```javascript
    var num1 = 2;
    var num2 = 3;
    var max = (num1 > num2) ? num1 : num2; // 3
```

<br>

#### 赋值操作符
> 赋值操作符，符号为一个等号(=)，其作用是把赋值操作符右边的变量赋值给赋值操作符左边的变量
```javascript
    var num = 234;
```
> 复合赋值操作符，在等号前面添加乘性操作符、加性操作符等符号
- 乘/赋值(*=)
- 除/赋值(/=)
- 模/赋值(%=)
- 加/赋值(+=)
- 减/赋值(-=)
- 左移/赋值(<<=)
- 有符号右移/赋值(>>=)
- 无符号右移/赋值(>>>=)
```javascript
    var num = 10;

    num *= 4; // num = num * 4; num -> 40
    num /= 2; // num = num / 2; num -> 5
    num %= 3; // num = num % 3; num -> 1
    num += 2; // num = num + 2; num -> 12
    num -= 7; // num = num - 7; num -> 3
```

<br>

#### 逗号操作符
> 符号为逗号(,)
- 函数有多个参数时，使用逗号操作符分隔参数
- 声明多个变量时，使用多个逗号操作符
```javascript
    const add = (num1, num2, num3) => num1 + num2 + num3;

    var num1 = 1,
        num2 = 2,
        num3 = 3;
```
